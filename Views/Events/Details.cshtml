@model VinhuniEvent.Models.Event
@{
    ViewData["Title"] = Model.Title;
    List<VinhuniEvent.Models.Event> RelatedEvent = ViewBag.RelatedEvent;
}

<div class="event-detail-page">
    <!-- Banner -->
    <div class="event-banner position-relative text-white">
        <img src="~/main/img/events/@Model.Image" alt="@Model.Title" class="banner-img">
        <div class="banner-overlay"></div>
        <div class="banner-content text-center">
            <h1 class="fw-bold display-5">@Model.Title</h1>
            <p class="mt-3 mb-0">
                <i class="fa-solid fa-calendar-days"></i>
                @Model.StartTime.ToString("dd/MM/yyyy HH:mm") - @Model.EndTime.ToString("dd/MM/yyyy HH:mm")
            </p>
            <p><i class="fa-solid fa-location-dot"></i> @Model.Location</p>
        </div>
    </div>

    <!-- Nội dung chính -->
    <div class="container py-5">
        <div class="row g-4">
            <!-- Cột chính -->
            <div class="col-lg-8">
                <div class="event-card p-4 shadow-lg rounded-4 bg-white">
                    <h3 class="fw-bold mb-3 text-primary">Giới thiệu sự kiện</h3>
                    <p class="text-secondary fs-5" style="white-space: pre-line;">
                        @Html.Raw(Model.Description)
                    </p>

                    <hr class="my-4">

                    <h4 class="fw-bold mb-3 text-primary">Thông tin chi tiết</h4>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <p><strong>Danh mục:</strong> @Model.Category.CategoryName</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Trạng thái:</strong> 
                                <span class="badge bg-info">@Model.Status</span>
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Ngày tạo:</strong> @Model.CreatedDate?.ToString("dd/MM/yyyy")</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Người tạo:</strong> @Model.CreatedByNavigation.FullName</p>
                        </div>
                        @if (Model.MaxParticipants.HasValue)
                        {
                            <div class="col-md-6">
                                <p><strong>Giới hạn:</strong> @Model.MaxParticipants người</p>
                            </div>
                        }
                        @if (Model.CurrentParticipants.HasValue)
                        {
                            <div class="col-md-6">
                                <p><strong>Đã đăng ký:</strong> @Model.CurrentParticipants</p>
                            </div>
                        }
                    </div>

                    <div class="mt-5 d-flex justify-content-between align-items-center">
                        <a asp-controller="Events" asp-action="Index" class="btn btn-outline-dark rounded-pill px-4 py-2">
                            <i class="fa-solid fa-arrow-left"></i> Quay lại
                        </a>
                        <button class="btn btn-primary rounded-pill px-4 py-2">
                            <i class="fa-solid fa-ticket"></i> Đăng ký tham gia
                        </button>
                    </div>
                </div>
            </div>

            <!-- Cột bên phải -->
            <div class="col-lg-4">
                <div class="related-card shadow-lg p-4 rounded-4 bg-white">
                    <h4 class="fw-bold mb-4 text-center text-primary">
                        <i class="fa-solid fa-bolt"></i> Sự kiện nổi bật
                    </h4>

                    @if (RelatedEvent != null && RelatedEvent.Any())
                    {
                        foreach (var ev in RelatedEvent)
                        {
                            <div class="related-item d-flex mb-3 align-items-center border-bottom pb-3">
                                <img src="~/main/img/events/@ev.Image" class="related-thumb rounded-3 me-3" alt="@ev.Title">
                                <div>
                                    <a href="@Url.Action("Details", "Events", new { slug = ev.Slug, id = ev.EventId })" 
                                       class="text-decoration-none fw-semibold text-dark hover-link">
                                        @ev.Title
                                    </a>
                                    <p class="small text-muted mb-0">
                                        <i class="fa-solid fa-calendar"></i> @ev.StartTime.ToString("dd/MM/yyyy")
                                    </p>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <p class="text-muted text-center">Không có sự kiện nổi bật</p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CSS -->
<style>
    .event-banner {
        position: relative;
        height: 400px;
        overflow: hidden;
        border-radius: 0 0 30px 30px;
    }

    .banner-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: brightness(70%);
        transition: transform 0.5s ease;
    }

    .event-banner:hover .banner-img {
        transform: scale(1.05);
    }

    .banner-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.7));
    }

    .banner-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .event-card, .related-card {
        background: #fff;
        border-radius: 16px;
        transition: all 0.3s ease;
    }

    .event-card:hover, .related-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }

    .related-thumb {
        width: 70px;
        height: 70px;
        object-fit: cover;
    }

    .hover-link:hover {
        color: #0d6efd !important;
    }

    body {
        background: #f8fafc;
    }
</style>
