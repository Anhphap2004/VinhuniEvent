@model IEnumerable<VinhuniEvent.Models.EventCategory>
@{
    ViewData["Title"] = "Danh mục sự kiện";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<style>
    .page-header {
        padding: 1.5rem 0;
        margin-bottom: 1.5rem;
        border-bottom: 2px solid #2a5298;
    }

    .page-title {
        color: #2a5298;
        font-size: 1.5rem;
        font-weight: 600;
        margin: 0 0 0.3rem 0;
    }

    .page-description {
        color: #6c757d;
        font-size: 0.9rem;
        margin: 0;
    }

    .search-box {
        margin-bottom: 1.5rem;
    }

    .search-input {
        border: 1px solid #ddd;
        padding: 0.5rem 0.75rem;
        font-size: 0.9rem;
    }

        .search-input:focus {
            border-color: #2a5298;
            outline: none;
            box-shadow: none;
        }

    .btn-search {
        background: #2a5298;
        color: white;
        border: none;
        padding: 0.5rem 1.2rem;
    }

        .btn-search:hover {
            background: #1e3c72;
        }

    .btn-add {
        background: #28a745;
        color: white;
        border: none;
        padding: 0.5rem 1.2rem;
    }

        .btn-add:hover {
            background: #218838;
        }

    .custom-table {
        margin: 0;
        border: 1px solid #dee2e6;
    }

        .custom-table thead th {
            background: #f8f9fa;
            color: #495057;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            padding: 0.75rem;
            border-bottom: 2px solid #dee2e6;
        }

        .custom-table tbody td {
            padding: 0.75rem;
            vertical-align: middle;
            font-size: 0.9rem;
        }

        .custom-table tbody tr:hover {
            background: #f8f9fa;
        }

    .badge-active {
        background: #d4edda;
        color: #155724;
        padding: 0.25rem 0.6rem;
        border-radius: 4px;
        font-size: 0.8rem;
    }

    .badge-inactive {
        background: #e2e3e5;
        color: #383d41;
        padding: 0.25rem 0.6rem;
        border-radius: 4px;
        font-size: 0.8rem;
    }

    .action-btn {
        padding: 0.3rem 0.6rem;
        font-size: 0.8rem;
        text-decoration: none;
        border: 1px solid;
        margin: 0 0.15rem;
    }

    .btn-edit {
        color: #0d6efd;
        border-color: #0d6efd;
    }

        .btn-edit:hover {
            background: #0d6efd;
            color: white;
        }

    .btn-detail {
        color: #6c757d;
        border-color: #6c757d;
    }

        .btn-detail:hover {
            background: #6c757d;
            color: white;
        }

    .btn-delete {
        color: #dc3545;
        border-color: #dc3545;
    }

        .btn-delete:hover {
            background: #dc3545;
            color: white;
        }
</style>
@* DANH MỤC SỰ KIỆN *@
<div class="container-fluid px-4">
    <!-- Header -->
    <div class="page-header">
        <h1 class="page-title">Quản lý danh mục sự kiện</h1>
        <p class="page-description">Quản lý và phân loại các sự kiện của Trường Đại học Vinh theo danh mục. Bạn có thể thêm mới, chỉnh sửa hoặc xóa các danh mục sự kiện.</p>
    </div>

    <!-- Search and Add -->
    <div class="row mb-3 align-items-center">
        <div class="col-md-8">
            <div class="input-group">
                <input type="text" id="searchInput" class="form-control search-input" placeholder="Tìm kiếm theo tên danh mục hoặc mô tả...">
                <button class="btn btn-search" type="button">
                    Tìm kiếm
                </button>
            </div>
        </div>
        <div class="col-md-4 text-end">
            <a asp-action="Create" class="btn btn-add">
                Thêm danh mục mới
            </a>
        </div>
    </div>

    <!-- Table -->
    <div>
        <table class="table custom-table">
            <thead>
                <tr class="text-center">
                    <th style="width: 25%;">Tên danh mục</th>
                    <th style="width: 40%;">Mô tả</th>
                    <th style="width: 12%;">Trạng thái</th>
                    <th style="width: 23%;">Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="searchable-row">
                        <td><strong>@item.CategoryName</strong></td>
                        <td>@item.Description</td>
                        <td class="text-center">
                            @if (item.IsActive == true)
                            {
                                <span class="badge-active">Hoạt động</span>
                            }
                            else
                            {
                                <span class="badge-inactive">Ngưng</span>
                            }
                        </td>
                        <td class="text-center">
                            <a asp-action="Edit" asp-route-id="@item.CategoryId" class="action-btn btn-edit">
                                Sửa
                            </a>
                            <a asp-action="Details" asp-route-id="@item.CategoryId" class="action-btn btn-detail">
                                Chi tiết
                            </a>
                            <a asp-action="Delete" asp-route-id="@item.CategoryId" class="action-btn btn-delete">
                                Xóa
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<script>
    // Search functionality
    document.getElementById('searchInput').addEventListener('keyup', function() {
        const searchTerm = this.value.toLowerCase();
        const rows = document.querySelectorAll('.searchable-row');

        rows.forEach(row => {
            const text = row.textContent.toLowerCase();
            if (text.includes(searchTerm)) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });

    // Search button click
    document.querySelector('.btn-search').addEventListener('click', function() {
        const event = new Event('keyup');
        document.getElementById('searchInput').dispatchEvent(event);
    });
</script>